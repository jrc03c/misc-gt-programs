-------------------------------------------------------------------------------
-- @jrc03c/r-squared/tests
-------------------------------------------------------------------------------
-- target : https://www.guidedtrack.com/programs/30093
-- author : Josh Castle (joshrcastle@gmail.com)
-------------------------------------------------------------------------------

*html
	<style>
		h1 {
			color: black !important;
			font-weight: 700 !important;
		}
	</style>

	<h1>All of these tests should pass:</h1>

>> error_is_fatal = "no"

-----

>> y_true = [0.02239014986281976,0.50727234143958,1.7473844949873554,1.1653207037515356,-0.3566774353623508,-1.680744223860718,-0.008230593207581452,-0.32922794036641034,-0.7474497181132754,0.4460615443967985,0.3196106663952538,-0.008378924842543267,-0.630520018277977,-0.5426385115002141,-0.291919273811747,-0.5406979818608914,1.5602092050345822,0.9689856482861737,1.1887547759998636,-0.37935556457362585,1.04146844103443,1.3092892172139776,-0.5089358855440821,-0.862419087404164,-0.40658745511140093,-1.3178926110307205,2.475361375772383,0.3758293607354432,-0.38005227973209826,0.2606464055591967,-2.447495422153134,-1.34632689951114,-0.790686848453254,1.5149547635503238,0.4530440397067646,-0.23355937631032367,0.11243135882281961,-0.15260611665921564,-2.2005524906658995,-0.5625945204897791,2.12493358599036,-0.6105926754091326,-0.1670032805861458,-0.2138475253439302,0.7413948319617261,0.02390692861116418,-1.1984965489199562,0.8085966763972546,0.30681550710607186,-0.9174478957949865,-1.1608504446562624,1.6556704898932533,-1.219960466809217,0.7310507438526174,0.6186979023162081,1.2816902096728777,-0.22717589375960504,0.784764964657645,0.0017042765119259107,-0.9409330283384598,0.26955939978484084,1.4037079461096922,1.6864127559633537,1.691850890820831,-1.2293391819482835,1.409098717663533,-0.36483428682927904,0.4471043501045123,0.2519019889175596,0.5955627547477247,-0.3951994333494422,1.680085935581012,-0.776470962604065,0.875756344511521,-1.4665864424012938,-1.0978355506379782,1.071124701384668,0.4035954880338795,0.5212085206374629,-1.3574514238600026,0.2373659845046094,-0.7666372819054605,-1.6027911147591738,0.5674437407509069,0.765336975424561,1.2990273162809645,-0.19649271248665667,1.396515940441839,0.5046431051512331,1.4187300289239781,0.4194033943551857,-0.31548034500458366,-0.13481595733202334,0.14622529259634112,0.7606325886996683,0.5089289941479376,-0.7683606034448116,0.4909906366034084,1.1840193215042787,0.6538757237160144]

>> y_pred = [0.022437693017657048,0.5074097486222734,1.7473963230077967,1.1650061387451687,-0.3567891608162784,-1.6806169320769309,-0.008130673517552239,-0.32922902372898777,-0.7474319000092463,0.4460856571453762,0.31951332806557775,-0.008293592235494314,-0.630418088546325,-0.5425371715340647,-0.29174866085317824,-0.5408000969491703,1.5602444774627886,0.9689671686194943,1.1887852927828728,-0.3794231451648846,1.0414625143013718,1.3093131932962343,-0.5088821030465478,-0.8623291486714526,-0.40670591789301014,-1.317781214167835,2.4753158203372143,0.37597435894762915,-0.3798533659335552,0.26070132186514217,-2.4476087147632564,-1.3463172359625877,-0.7906250843947065,1.514881228633368,0.45283668641944563,-0.23340379973134825,0.11254985998992796,-0.15261080850459594,-2.2005971357306837,-0.56255051202796,2.1247741150897586,-0.6105752502709403,-0.16687131991172716,-0.2139532431445977,0.7413939394547758,0.023944578816095474,-1.1985564080765754,0.8086301702851931,0.30699000284164457,-0.9172968165802978,-1.1608985852283082,1.6557519704210935,-1.2200443448981748,0.7311207792244523,0.618611561457093,1.2816881054282678,-0.22707938947457346,0.7846819499083272,0.0015605303783681852,-0.9410159172990766,0.26959361814528254,1.4038389710838883,1.6862812139483447,1.6919821879378385,-1.2294185403120599,1.4090488894472257,-0.3648992576517806,0.4472237045571543,0.2517118072794476,0.5955255531082325,-0.39526164028819005,1.680083932500776,-0.7765210155481351,0.8757101006527876,-1.466569638778549,-1.0978627225992654,1.0709567698940095,0.40361824164026827,0.5211311582079324,-1.3575909491784695,0.2374071602340305,-0.7666085078518897,-1.6028751335614533,0.5674339616039814,0.7653719352476319,1.2990063283615871,-0.19648069013217123,1.3965198174430542,0.5044823604740801,1.418679211916678,0.4192367594629649,-0.31550090620020743,-0.13483326135715187,0.14614779196992855,0.760690174995467,0.5090315036702815,-0.7684352720062296,0.49085781229065295,1.1839442129027415,0.6538180296882611]

*program: @jrc03c/r-squared

*if: r_squared > 0.9999
	>> success_title = "@jrc03c/r-squared/tests"
	>> success_message = "Passed!"
	*program: @jrc03c/show-success

*if: r_squared <= 0.9999
	>> error_title = "@jrc03c/r-squared/tests"
	>> error_message = "Expected an R^2 score greater than 0.9999 but received {r_squared.round(16).text}!"
	*program: @jrc03c/show-error

-----

>> y_true = [[-0.3759436673720332,-0.144257965480364,-0.14033737750559827,0.09165785760754767,-0.42862697611924716],[1.397147809177741,-1.481125276919521,-1.6116075934123815,0.28429408892934943,-0.5655285951810827],[-1.372288976942497,-0.10959675746420305,-0.035103707104559595,-1.6510899507164871,-0.24091869517359427],[0.7971483338032559,1.7663758405721635,0.1866454049593027,0.28534236097860194,-0.4171972412700949],[-0.09520148210220532,0.7266486175729957,0.3378664790303968,-0.030230589609346995,0.23600471394944625]]

>> y_pred = [[0.7730235561881954,0.49177137435267854,1.7889203146307981,-1.495279955120389,2.1407268649671725],[1.4712806509964342,-1.5054859376961376,-0.7130869539843653,0.4568606788865324,0.16859778818681614],[0.6909190328684299,-1.1393574402189834,-1.9946986392876744,-2.4211852488120247,0.7607971213041564],[-0.6575534609278595,1.121571892117285,-1.2149610881719037,1.4580023987944175,0.6355920050524648],[-0.05407089814762578,-1.5056730920444688,0.6683822882138477,0.9190751738795689,1.8596445179652636]]

*program: @jrc03c/r-squared

>> diff = r_squared - (-1.5362681265456986)

*if: diff < 0
	>> diff = -diff

*if: diff < 0.0001
	>> success_title = "@jrc03c/r-squared/tests"
	>> success_message = "Passed!"
	*program: @jrc03c/show-success

*if: diff >= 0.0001
	>> error_title = "@jrc03c/r-squared/tests"
	>> error_message = "Expected an R^2 score close to -1.5362681265456986 but received {r_squared.round(16).text}!"
	*program: @jrc03c/show-error

-----

>> y_true = [[[-0.38081444403487325,-0.39003145469684547,-0.594652136579519,0.6552843516202062],[0.04577720316512527,-1.0074788831105197,1.6805363963149953,1.8278968134804556],[-0.9016327782352406,0.034906795012939786,-0.39090304113480995,-2.2517209267338734]],[[1.263705934915358,1.0472867544038917,2.164077484869645,-0.30057239667184577],[0.9438243756567181,2.0989218532672145,1.0849981253897039,-0.7867823609436003],[0.8676337110392713,0.9674668900703863,-0.11511059373119394,-1.154572295699679]]]

>> y_pred = [[[0.39744001346106633,-1.2390247617774803,-0.8496643374268791,-0.23467942331100422],[0.3569069096608715,-0.43512102691516974,1.305264519575799,-0.7349364673767582],[-1.1622815879957356,-0.7049173908815054,-0.7455992611553095,-1.6959338394010692]],[[0.13150766180490847,2.164482188830879,2.3546517614693925,-0.16413079570607259],[-0.39280264900754347,2.6054151905586176,-0.5058528190902387,-2.1248944520326116],[1.4359468337996733,-0.28622927608754123,0.7376011944777938,-1.3546501223275813]]]

*program: @jrc03c/r-squared

>> diff = r_squared - 0.27185788921532517

*if: diff < 0
	>> diff = -diff

*if: diff < 0.0001
	>> success_title = "@jrc03c/r-squared/tests"
	>> success_message = "Passed!"
	*program: @jrc03c/show-success

*if: diff >= 0.0001
	>> error_title = "@jrc03c/r-squared/tests"
	>> error_message = "Expected an R^2 score close to 0.27185788921532517 but received {r_squared.round(16).text}!"
	*program: @jrc03c/show-error

-----

*html
	<style>
		h1 {
			color: black !important;
			font-weight: 700 !important;
		}
	</style>

	<hr>
	<h1>All of these tests should fail:</h1>

-----

>> wrongs = [[123, 456], ["foo", "bar"], [calendar::now, calendar::now], [{"hello" -> "world"}, {"goodbye" -> "world"}], [[1, 2], [3, 4, 5]], [[1, 2, 3], 234], [[1, 2, 3], "foo"], [[1, 2, 3], calendar::now], [[1, 2, 3], {"hello" -> "world"}]]

*for: i, pair in wrongs
	>> y_true = pair[1]
	>> y_pred = pair[2]
	*program: @jrc03c/r-squared

*button: Okay